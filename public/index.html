<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8" />
        <meta content="width=device-width, initial-scale=1.0" name="viewport" />
        <title>static.fm - Minimalist Web Radio</title>
        
        <!-- 引入自定义CSS文件 -->
        <link href="./css/style.css" rel="stylesheet" />
        
        <link href="https://fonts.googleapis.com" rel="preconnect" />
        <link
            crossorigin=""
            href="https://fonts.gstatic.com"
            rel="preconnect" />
        <link
            href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700&amp;display=swap"
            rel="stylesheet" />
        <link
            href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
            rel="stylesheet" />
        
        <style>
            .material-symbols-outlined {
                font-variation-settings:
                    'FILL' 0,
                    'wght' 400,
                    'GRAD' 0,
                    'opsz' 24;
            }
        </style>
        
        <!-- Alpine.js -->
        <script
            src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
            defer></script>

        <!-- Wave.js (使用npm包的CDN链接) -->
        <script src="https://cdn.jsdelivr.net/npm/@foobar404/wave@2.0.5/dist/bundle.js"></script>
    </head>

    <body x-data="radioPlayer()">
        <!-- Audio element -->
        <audio
            id="radio-audio"
            src="https://radio.startend.xyz/radio"
            crossorigin="anonymous"></audio>

        <div class="layout-container">
            <div class="header">
                <h3>static.fm</h3>
            </div>
            <main class="main-content">
                <div class="content-wrapper">
                    <div class="visualization-container">
                        <div class="visualization-wrapper">
                            <div class="visualization-content"
                                data-alt="Abstract audio visualization with pulsing blue and purple lines on a dark background">
                                <!-- Audio Visualization Canvas -->
                                <canvas
                                    id="wave-canvas"
                                    class="wave-canvas"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="title-container">
                        <h1 class="track-title" x-text="trackTitle">
                            加载中...
                        </h1>
                        <p class="artist"
                            x-show="artist"
                            x-text="artist">
                            未知艺术家
                        </p>
                    </div>
                </div>
            </main>
            
            <!-- 悬浮控制按钮 -->
            <div class="floating-controls">
                <button
                    @click="reloadStream"
                    title="重新连接流"
                    class="reload-button">
                    <span class="material-symbols-outlined reload-icon">refresh</span>
                </button>
                <button
                    @click="togglePlay"
                    :disabled="loading"
                    class="play-button"
                    x-text="isPlaying ? '⏸' : '▶'">
                    <span class="material-symbols-outlined play-icon" x-show="isPlaying">pause</span>
                    <span class="material-symbols-outlined play-icon" x-show="!isPlaying">play_arrow</span>
                </button>
                <div class="volume-container">
                    <input
                        type="range"
                        min="0"
                        max="1"
                        step="0.01"
                        x-model.number="volume"
                        @input="setVolume"
                        class="volume-slider" />
                </div>
            </div>
            
            <!-- 状态消息 -->
            <div
                class="status-message"
                :class="{ 'error': hasError }"
                x-text="statusMessage"></div>
        </div>

        <!-- 引入外部JavaScript文件 -->
        <script src="./js/player.js"></script>
    </body>
</html>