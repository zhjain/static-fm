<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Static FM ÁÆ°ÁêÜÂêéÂè∞</title>
        
        <!-- ÂºïÂÖ•Ëá™ÂÆö‰πâCSSÊñá‰ª∂ -->
        <link href="./css/admin.css" rel="stylesheet" />
        <link href="./css/style.css" rel="stylesheet" />
        
        <!-- Alpine.js -->
        <script
            src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
            defer></script>
    </head>
    <body x-data="adminApp()" x-init="init()">
        <div class="container">
            <header>
                <h1>üìª Static FM ÁÆ°ÁêÜÂêéÂè∞</h1>
                <div class="controls">
                    <button @click="rescanSongs">ÈáçÊñ∞Êâ´Êèè</button>
                    <button @click="nextSong">‰∏ã‰∏ÄÈ¶ñ</button>
                </div>
            </header>

            <section class="upload-section">
                <h2>‰∏ä‰º†Êñ∞Ê≠åÊõ≤</h2>
                <form @submit.prevent="uploadSongs">
                    <div class="form-group">
                        <label for="songFile">ÈÄâÊã©Èü≥‰πêÊñá‰ª∂ (ÂèØÂ§öÈÄâ):</label>
                        <input
                            type="file"
                            id="songFile"
                            name="songs"
                            accept="audio/*"
                            multiple
                            required
                            @change="handleFileSelect" />
                    </div>
                    
                    <!-- Êñá‰ª∂È¢ÑËßàÂàóË°® -->
                    <template x-if="selectedFiles.length > 0">
                        <div class="file-preview">
                            <h4>Â∑≤ÈÄâÊã©ÁöÑÊñá‰ª∂:</h4>
                            <ul style="list-style-type: none; padding: 0;">
                                <template x-for="(file, index) in selectedFiles" :key="index">
                                    <li style="padding: 5px 0; border-bottom: 1px solid #eee;">
                                        <span x-text="file.name"></span> 
                                        (<span x-text="formatFileSize(file.size)"></span>)
                                    </li>
                                </template>
                            </ul>
                        </div>
                    </template>
                    
                    <button type="submit" :disabled="uploading">
                        <span x-text="uploading ? '‰∏ä‰º†‰∏≠...' : '‰∏ä‰º†'"></span>
                    </button>
                </form>
                
                <!-- ‰∏ä‰º†Áä∂ÊÄÅ -->
                <template x-if="uploadStatus">
                    <div class="upload-status">
                        <p x-text="uploadStatus"></p>
                    </div>
                </template>
            </section>

            <section class="songs-list">
                <h2>Ê≠åÊõ≤ÂàóË°®</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Ê≠åÊõ≤Âêç</th>
                            <th>‰∏ä‰º†Êó∂Èó¥</th>
                            <th>Êìç‰Ωú</th>
                        </tr>
                    </thead>
                    <tbody>
                        <template x-for="(song, index) in songs" :key="song.id">
                            <tr>
                                <td x-text="song.name || song.title || 'Êú™Áü•Ê≠åÊõ≤'"></td>
                                <td x-text="formatDate(song.addedAt)"></td>
                                <td>
                                    <button class="delete-btn" @click="deleteSong(song.id)">Âà†Èô§</button>
                                </td>
                            </tr>
                        </template>
                    </tbody>
                </table>
            </section>

            <section class="status-bar">
                <div class="status-item">
                    ÂΩìÂâçÊí≠Êîæ: <span x-text="currentSong || 'Êú™Áü•'"></span>
                </div>
                <div class="status-item">
                    Áä∂ÊÄÅ: <span x-text="playerStatus"></span>
                </div>
            </section>
        </div>

        <!-- ÂºïÂÖ•Â§ñÈÉ®JavaScriptÊñá‰ª∂ -->
        <script src="./js/admin.js"></script>
    </body>
</html>